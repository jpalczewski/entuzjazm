---
import BaseLayout from "@layouts/BaseLayout.astro";
import { getLangFromUrl } from "src/i18n/utils";
const pageTitle = 'Insights';

import { getCollection } from 'astro:content';
import InsightCard from "@components/InsightCard.astro";
const lang = getLangFromUrl(Astro.url);
const blogEntries = await getCollection('insight', ({data}) => { return data.language == lang});
export function getStaticPaths() {
  return [
    {params: {lang: 'pl'}},
    {params: {lang: 'en'}},
  ];
}
---
<BaseLayout pageTitle={pageTitle}>

    {blogEntries.map(blogPostEntry => (
       <InsightCard insight={blogPostEntry} lang={lang} />

    ))}

</BaseLayout>