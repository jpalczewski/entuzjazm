---
import BaseLayout from "@layouts/BaseLayout.astro";
import { getLangFromUrl } from "src/i18n/utils";
const pageTitle = 'Insights';

import { getCollection } from 'astro:content';
import InsightCard from "@components/InsightCard.astro";
const lang = getLangFromUrl(Astro.url);
const blogEntries = await getCollection('insight', ({data}) => { return data.language == lang});
export function getStaticPaths() {
  return [
    {params: {lang: 'pl'}},
    {params: {lang: 'en'}},
  ];
}
console.log(blogEntries);
---
<BaseLayout pageTitle={pageTitle}>

    {blogEntries.sort((a,b) => {
        //const dateA =  parseInt(a.data.date)
        //const dateB = parseInt(b.data.date)
        //return dateA - dateB;
        return -1;
        } 
      )
      .map(blogPostEntry => (
       <InsightCard insight={blogPostEntry} lang={lang} />  
      )
    )
    }

</BaseLayout>